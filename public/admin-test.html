<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç®¡ç†åå°æµ‹è¯•é¡µé¢</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .test-item {
      margin: 15px 0;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #ddd;
    }
    .success {
      background: #f0f9ff;
      border-left-color: #10b981;
      color: #065f46;
    }
    .error {
      background: #fef2f2;
      border-left-color: #ef4444;
      color: #991b1b;
    }
    .info {
      background: #f0f9ff;
      border-left-color: #3b82f6;
      color: #1e40af;
    }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      margin: 10px 5px;
      font-size: 16px;
    }
    button:hover {
      background: #2563eb;
    }
    pre {
      background: #f3f4f6;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ”§ ç®¡ç†åå°æµ‹è¯•é¡µé¢</h1>
    <p>è¿™ä¸ªé¡µé¢å¸®åŠ©ä½ æµ‹è¯•ç®¡ç†åå°çš„å„é¡¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
    
    <div class="test-item info">
      <h3>ğŸ“‹ æµ‹è¯•é¡¹ç›®</h3>
      <ol>
        <li>æ£€æŸ¥CSSæ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½</li>
        <li>æ£€æŸ¥JavaScriptæ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½</li>
        <li>æ£€æŸ¥DOMå…ƒç´ æ˜¯å¦å­˜åœ¨</li>
        <li>æ£€æŸ¥APIè¿æ¥æ˜¯å¦æ­£å¸¸</li>
        <li>æ£€æŸ¥äº‹ä»¶ç›‘å¬å™¨æ˜¯å¦æ­£å¸¸</li>
      </ol>
    </div>

    <button onclick="runTests()">ğŸš€ å¼€å§‹æµ‹è¯•</button>
    <button onclick="clearResults()">ğŸ§¹ æ¸…é™¤ç»“æœ</button>
    <button onclick="openAdmin()">ğŸ”— æ‰“å¼€ç®¡ç†åå°</button>

    <div id="results"></div>
  </div>

  <script>
    const results = document.getElementById('results');

    function addResult(title, content, type = 'info') {
      const div = document.createElement('div');
      div.className = `test-item ${type}`;
      div.innerHTML = `<h3>${title}</h3><div>${content}</div>`;
      results.appendChild(div);
    }

    function clearResults() {
      results.innerHTML = '';
    }

    function openAdmin() {
      window.open('admin.html', '_blank');
    }

    async function runTests() {
      clearResults();
      
      // æµ‹è¯•1: æ£€æŸ¥CSSæ–‡ä»¶
      addResult('ğŸ”„ æµ‹è¯•1: CSSæ–‡ä»¶æ£€æŸ¥', 'æ£€æŸ¥ä¸­...');
      try {
        const response = await fetch('css/admin-modern.css');
        if (response.ok) {
          const cssText = await response.text();
          addResult('âœ… æµ‹è¯•1: CSSæ–‡ä»¶æ£€æŸ¥', `
            <p><strong>çŠ¶æ€:</strong> CSSæ–‡ä»¶åŠ è½½æˆåŠŸ</p>
            <p><strong>æ–‡ä»¶å¤§å°:</strong> ${(cssText.length / 1024).toFixed(2)} KB</p>
            <p><strong>åŒ…å«æ ·å¼:</strong> ${cssText.includes('.admin-body') ? 'æ˜¯' : 'å¦'}</p>
          `, 'success');
        } else {
          addResult('âŒ æµ‹è¯•1: CSSæ–‡ä»¶æ£€æŸ¥', `
            <p><strong>é”™è¯¯:</strong> CSSæ–‡ä»¶åŠ è½½å¤±è´¥ (${response.status})</p>
          `, 'error');
        }
      } catch (error) {
        addResult('âŒ æµ‹è¯•1: CSSæ–‡ä»¶æ£€æŸ¥', `
          <p><strong>é”™è¯¯:</strong> ${error.message}</p>
        `, 'error');
      }

      // æµ‹è¯•2: æ£€æŸ¥JavaScriptæ–‡ä»¶
      addResult('ğŸ”„ æµ‹è¯•2: JavaScriptæ–‡ä»¶æ£€æŸ¥', 'æ£€æŸ¥ä¸­...');
      try {
        const response = await fetch('js/admin.js');
        if (response.ok) {
          const jsText = await response.text();
          addResult('âœ… æµ‹è¯•2: JavaScriptæ–‡ä»¶æ£€æŸ¥', `
            <p><strong>çŠ¶æ€:</strong> JavaScriptæ–‡ä»¶åŠ è½½æˆåŠŸ</p>
            <p><strong>æ–‡ä»¶å¤§å°:</strong> ${(jsText.length / 1024).toFixed(2)} KB</p>
            <p><strong>åŒ…å«å‡½æ•°:</strong> ${jsText.includes('initAdmin') ? 'æ˜¯' : 'å¦'}</p>
          `, 'success');
        } else {
          addResult('âŒ æµ‹è¯•2: JavaScriptæ–‡ä»¶æ£€æŸ¥', `
            <p><strong>é”™è¯¯:</strong> JavaScriptæ–‡ä»¶åŠ è½½å¤±è´¥ (${response.status})</p>
          `, 'error');
        }
      } catch (error) {
        addResult('âŒ æµ‹è¯•2: JavaScriptæ–‡ä»¶æ£€æŸ¥', `
          <p><strong>é”™è¯¯:</strong> ${error.message}</p>
        `, 'error');
      }

      // æµ‹è¯•3: æ£€æŸ¥HTMLæ–‡ä»¶
      addResult('ğŸ”„ æµ‹è¯•3: HTMLæ–‡ä»¶æ£€æŸ¥', 'æ£€æŸ¥ä¸­...');
      try {
        const response = await fetch('admin.html');
        if (response.ok) {
          const htmlText = await response.text();
          const hasNavbar = htmlText.includes('admin-navbar');
          const hasSidebar = htmlText.includes('admin-sidebar');
          const hasMainContent = htmlText.includes('admin-main');
          const hasModernCSS = htmlText.includes('admin-modern.css');
          
          addResult('âœ… æµ‹è¯•3: HTMLæ–‡ä»¶æ£€æŸ¥', `
            <p><strong>çŠ¶æ€:</strong> HTMLæ–‡ä»¶åŠ è½½æˆåŠŸ</p>
            <p><strong>æ–‡ä»¶å¤§å°:</strong> ${(htmlText.length / 1024).toFixed(2)} KB</p>
            <p><strong>åŒ…å«å¯¼èˆªæ :</strong> ${hasNavbar ? 'æ˜¯' : 'å¦'}</p>
            <p><strong>åŒ…å«ä¾§è¾¹æ :</strong> ${hasSidebar ? 'æ˜¯' : 'å¦'}</p>
            <p><strong>åŒ…å«ä¸»å†…å®¹:</strong> ${hasMainContent ? 'æ˜¯' : 'å¦'}</p>
            <p><strong>å¼•ç”¨ç°ä»£CSS:</strong> ${hasModernCSS ? 'æ˜¯' : 'å¦'}</p>
          `, hasNavbar && hasSidebar && hasMainContent && hasModernCSS ? 'success' : 'error');
        } else {
          addResult('âŒ æµ‹è¯•3: HTMLæ–‡ä»¶æ£€æŸ¥', `
            <p><strong>é”™è¯¯:</strong> HTMLæ–‡ä»¶åŠ è½½å¤±è´¥ (${response.status})</p>
          `, 'error');
        }
      } catch (error) {
        addResult('âŒ æµ‹è¯•3: HTMLæ–‡ä»¶æ£€æŸ¥', `
          <p><strong>é”™è¯¯:</strong> ${error.message}</p>
        `, 'error');
      }

      // æµ‹è¯•4: æ£€æŸ¥APIè¿æ¥
      addResult('ğŸ”„ æµ‹è¯•4: APIè¿æ¥æ£€æŸ¥', 'æ£€æŸ¥ä¸­...');
      try {
        const response = await fetch('/api/status');
        const data = await response.json();
        
        if (response.ok) {
          addResult('âœ… æµ‹è¯•4: APIè¿æ¥æ£€æŸ¥', `
            <p><strong>çŠ¶æ€:</strong> APIè¿æ¥æ­£å¸¸</p>
            <p><strong>æ•°æ®åº“çŠ¶æ€:</strong> ${data.status}</p>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          `, 'success');
        } else {
          addResult('âŒ æµ‹è¯•4: APIè¿æ¥æ£€æŸ¥', `
            <p><strong>é”™è¯¯:</strong> APIå“åº”é”™è¯¯ (${response.status})</p>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          `, 'error');
        }
      } catch (error) {
        addResult('âŒ æµ‹è¯•4: APIè¿æ¥æ£€æŸ¥', `
          <p><strong>é”™è¯¯:</strong> ${error.message}</p>
          <p>å¯èƒ½åŸå› ï¼š</p>
          <ul>
            <li>æœ¬åœ°æœåŠ¡å™¨æœªå¯åŠ¨</li>
            <li>APIè·¯ç”±é…ç½®é”™è¯¯</li>
            <li>CORSé—®é¢˜</li>
          </ul>
        `, 'error');
      }

      // æµ‹è¯•5: æ£€æŸ¥Font Awesome
      addResult('ğŸ”„ æµ‹è¯•5: Font Awesomeæ£€æŸ¥', 'æ£€æŸ¥ä¸­...');
      try {
        const response = await fetch('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');
        if (response.ok) {
          addResult('âœ… æµ‹è¯•5: Font Awesomeæ£€æŸ¥', `
            <p><strong>çŠ¶æ€:</strong> Font AwesomeåŠ è½½æˆåŠŸ</p>
            <p><strong>CDNçŠ¶æ€:</strong> æ­£å¸¸</p>
          `, 'success');
        } else {
          addResult('âš ï¸ æµ‹è¯•5: Font Awesomeæ£€æŸ¥', `
            <p><strong>è­¦å‘Š:</strong> Font Awesome CDNå“åº”å¼‚å¸¸</p>
            <p>å›¾æ ‡å¯èƒ½æ— æ³•æ­£å¸¸æ˜¾ç¤º</p>
          `, 'error');
        }
      } catch (error) {
        addResult('âš ï¸ æµ‹è¯•5: Font Awesomeæ£€æŸ¥', `
          <p><strong>è­¦å‘Š:</strong> æ— æ³•è¿æ¥åˆ°Font Awesome CDN</p>
          <p>å›¾æ ‡å¯èƒ½æ— æ³•æ­£å¸¸æ˜¾ç¤º</p>
        `, 'error');
      }

      addResult('ğŸ‰ æµ‹è¯•å®Œæˆ', `
        <p>æ‰€æœ‰æµ‹è¯•å·²å®Œæˆã€‚è¯·æ ¹æ®ä¸Šè¿°ç»“æœè¿›è¡Œç›¸åº”çš„ä¿®å¤æ“ä½œã€‚</p>
        <p><strong>å»ºè®®ï¼š</strong></p>
        <ul>
          <li>å¦‚æœCSSæˆ–JSæ–‡ä»¶åŠ è½½å¤±è´¥ï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„å’ŒæœåŠ¡å™¨é…ç½®</li>
          <li>å¦‚æœAPIè¿æ¥å¤±è´¥ï¼šç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ</li>
          <li>å¦‚æœHTMLç»“æ„æœ‰é—®é¢˜ï¼šæ£€æŸ¥admin.htmlæ–‡ä»¶</li>
        </ul>
        <p><a href="admin.html" target="_blank">ç‚¹å‡»è¿™é‡Œæ‰“å¼€ç®¡ç†åå°</a></p>
      `, 'info');
    }
  </script>
</body>
</html>
